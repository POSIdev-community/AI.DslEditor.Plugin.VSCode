## Обзор

JSA DSL — плагин для VSCode, который помогает при написании пользовательских [DSL-правил](https://github.com/POSIdev-community/AI.DslEditor.Plugin.VSCode/blob/main/media/DSL_syntax.md), обеспечивая полноценную подсветку синтаксиса JSA DSL, интеллектуальное автодополнение и комплексную диагностику кода. Дополнительно плагин поддерживает быстрые исправления ошибок, навигацию по коду и автоматическое форматирование при изменении файлов `.jsa.dsl`.

## Ключевые возможности

**Подсветка синтаксиса**

Полная поддержка цветового выделения для всех конструкций JSA DSL.

**Интеллектуальное автодополнение**

Автодополнение языковых конструкций в режиме реального времени с учетом контекста и синтаксических правил.

**Расширенная диагностика кода**

Плагин предоставляет комплексную проверку на трех уровнях:
* Синтаксический анализ:
   * выявление ошибок структуры кода (несоответствие скобок, незавершенные блоки);
   * проверка корректности названий пространств имен, классов и функций;
   * валидация аргументов функций `Detect` и `filter`.
* Семантическая проверка:
   * обнаружение дублирующихся объявлений классов и функций;
   * проверка неизвестных PVO Grammar-идентификаторов и типов уязвимостей;
   * анализ соответствия типов данных и разрешения ссылок в фильтрах;
   * выявление множественных операторов `return`;
   * проверка дублирования названий параметров функций и базовых классов;
   * запрет вложенных объявлений классов и функций.
* Анализ качества кода:
   * определение избыточных операторов `pass`;
   * обнаружение неиспользуемых параметров в функциях.

**Контекстные подсказки**

Показ справочной информации о синтаксисе и семантике элементов кода при наведении курсора.

**Быстрые исправления (Quick Fixes)**

Удаление избыточных операторов `pass` и автоматическое переименование или удаление неиспользуемых параметров

**Навигация по коду**

Поддержка следующих команд для ускорения навигации и рефакторинга кода:
* **Go to Definition**: переход к исходному коду функций и классов;
* **Find References**: поиск всех упоминаний выбранного элемента в проекте.

**Форматирование в реальном времени**

Автоматическое приведение кода к единому стилю при вводе (активно по умолчанию для файлов `.jsa.dsl`).

## Установка и использование

При установке плагина языковой сервер загружается и запускается автоматически. Файлы сервера сохраняются по следующим путям:
* в Windows: `%LOCALAPPDATA%\jsa-dsl\language-server\{server-version}`
* в Linux и macOS: `~/.config/jsa-dsl/language-server/{server-version}`

![Ручная загрузка языкового сервера](https://github.com/POSIdev-community/AI.DslEditor.Plugin.VSCode/raw/main/media/download_lsp.gif)

Для работы с плагином достаточно открыть файл с расширением `.jsa.dsl`.

## Команды и параметры плагина



### Параметры плагина

Вы можете настроить параметры плагина, выбрав в главном меню **File** → **Preferences** → **Setting**s или нажав клавиши Ctrl и +.

Страница настройки плагина содержит следующие параметры:
* `jsa.dsl.languageServer.customPath` — пользовательский путь к языковому серверу. По умолчанию не задан, так как используется встроенный сервер.
* `jsa.dsl.diagnostics.enableUnusedParameterWarning` — включает предупреждения о неиспользуемых параметрах функций. По умолчанию — `false`.
* `jsa.dsl.diagnostics.enableUnnecessaryPassWarning` — включает предупреждения о лишних операторах `pass`. По умолчанию — `true`.
* `jsa.dsl.diagnostics.enableTypeCheckWarning` - включает предупреждения о несоответсвиях возвращаемых типов функций

### Команды для работы с плагином

Для работы с плагином вы можете вводить в command palette следующие команды:
* `JSA DSL: Install LSP`. Установка языкового сервер вручную. Команда доступна, если сервер еще не установлен.
* `JSA DSL: Restart plugin`. Перезапуск плагина и языкового сервера. Может понадобиться при обновлении параметров или при устранении проблем.

## Поддержка и обратная связь

Если у вас возникли вопросы по работе плагина, вы обнаружили проблему или хотите предложить улучшение, оставьте соответствующее сообщение в репозитории проекта.
